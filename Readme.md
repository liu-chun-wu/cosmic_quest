COSMIC QUEST
===
# 說明
計算機概論的期末專題，我們使用了JavaFx製作了一款名為COSMIC QUEST的音樂遊戲，玩家要根據音樂的節奏按下特定按鍵來得分，有點像是太鼓達人，只是我們有四條軌道
# 基本功能
1. 初始介面有三種主要功能 :
    1. 開始遊戲 / 結束程式
    2. 設定 : 可以調整 音樂時間補足/音符落下時長/音樂音量

2. 玩遊戲 : 
    1. 點擊start按鈕後，利用上下左右按鍵控制四條軌道對應的檢查點
    2. 中間可以用空白建暫停，會跳出選單讓玩家選擇要繼續，結束還是調整音量
    3. 想要重新開始可以按R(Reset)來重新遊玩

3. 結算 : 遊戲結束後會跳到結算頁面
    1. 根據玩家點擊音符的時機，有 Perfect/Great/Bad/Miss 四種評分
    2. 並且可以讓玩家回到初始頁面或是結束程式

# 困難
1. javafx,fxml,scenebuilder的相關操作:
- 我們用javafx 載入 scene builder 建出的 fxml 檔，還有後續的其他控制，例如在不同的fxml之間切換等等，一開始不熟悉相關語法和操作時在找資料上花費不少時間，而且有時候是環境沒有建好，像是javafx 要播音樂的話要在run configuration 的 vm argument那邊還要再加上--add-modules javafx.controls,javafx.media，類似我們要載入fxml時需要加上的--add-modules javafx.controls,javafx.fxml 

2. 設計架構:
- 設計架構時遇到了不少問題，像是要有幾個class，某個功能要不要切一個class出去，切出一個class後呼叫起來是會更簡單還是更麻煩。變數和method要設public還是private，有些東西runtime時才執行，不能設成static，所以要新增一個物件來使用他的method。

3. 設計防呆機制和例外情形考慮:
- 我們也花不少時間模擬各種情況，讓該有作用的鍵在該作用的時機發揮作用，不該作用的鍵在不該作用的時機不要作用，因為我們的控制鍵都是有作用的，如果按鍵在不該作用時被觸發了，程式就會出包，包括但並不限於，遊戲開始前就按重製鍵，如果有人一直按著WASD鍵時要怎麼處理，如果有人在跳轉結算畫面時按下空白鍵，如果有人一直按著空白鍵不放要怎麼樣才能保證程式正常運行等等。

4. 架構和執行優化:
- 目前程式再開始就把所有音符渲染好，並用PathTransion的setDelay()控制時間，還另外寫一個Timer來進行每個毫秒的判定。之後設計架構時，只要用Timeline在所有要生成音符的時間點執行生成音符並播放的函式，並利用Queue先進先出的特性儲存已生成但尚未消失的音符，這樣在暫停時，只要暫停Timeline和Queue中的音符就好。

5. 音符的判定機制:
- 一開始我們是用音符和判定點的距離來決定音符的狀態，後來參考很多網路上的資料後決定用時間來判斷，也就是按下的時機點，這麼做的好處是更加精確的時機點安排，但壞處就是畫面可能會有細微落差。

6. 兩段軌道:
- 我們預計讓生成的音符從畫面外移動到中心點，但又要控制到判定點的時間方便控制，所以寫了兩段動畫控制音符移動，其中，第一段就是Path加PathTransition的組合，第二段是Timeline，同時在第二段動畫中，加入淡出的效果。

7. 一些小問題
    1.	Text物件的錨點和ImageView物件不太一樣，導致設計時圖像與文字可能歪掉，透過SceneBuilder調整後，還是會有一點點偏移。
    2.	原本希望ImageView物件可以直接使用onMouseClicked()來觸發事件，但結果無法運作，所以決定在圖案上方放一個Opacity為0.0的按鈕來控制。

# 創意
1.	自行設計架構
- 因為網路上查不到可以參考的音樂遊戲架構，所以就自己摸索，至少這個架構可以正常的運作。

2.	音樂創作和音符設計
- 音樂來自於隊友寫出來的一首樂曲，包含三連音的設計等等，在音符設計方面，也是以圓點表示，如此便不用處理音符轉向的問題

3.	設計圖標和介面
    A.	圖標和畫面主要用Canva製作，部分內容有使用到圖庫的設計，而遊玩畫面中的背景為AI生成。
    B.	介面方面採用正方形為基礎，使得音符在遊玩畫面中，移動到中心點的動畫更和諧。
    C.	在設置介面使用菱形襯底，使方形的畫面更加生動。
    D.	離開遊戲的圖標有下載免費圖片，以黑洞的概念表示離開的意象。
    E.	設定的圖標以齒輪和行星為設計元素。
    F.	回到開始畫面以箭頭為設計元素。
    G.	音符的移動軌跡用曲線來增加中心的圓之主體
# 未來展望
1. 更多神奇的音效和迷因
2. 新增教學頁面，選歌頁面，玩家排行榜。
3. 架構和執行優化。
- 目前程式再開始就把所有音符渲染好，並用PathTransion的setDelay()控制時間，還另外寫一個Timer來進行每個毫秒的判定。之後設計架構時，只要用TimeLine在所有要生成音符的時間點執行生成音符並播放的函式，並利用Queue先進先出的特性儲存已生成但尚未消失的音符，這樣在暫停時，只要暫停Timeline和Queue中的音符就好。
4. 更多首歌。
5. 做出長條音符以及更多的效果。




